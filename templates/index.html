<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö Qu·∫£n L√Ω Th∆∞ Vi·ªán - B-Tree Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
</head>
<body class="bg-slate-100 min-h-screen font-sans">
    
    <nav class="bg-indigo-700 shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 text-white flex justify-between items-center">
            <div class="flex items-center gap-3">
                <i class="bi bi-book-half text-2xl"></i>
                <h1 class="text-xl font-bold">Th∆∞ Vi·ªán B-Tree</h1>
            </div>
            <div class="flex items-center gap-2 bg-indigo-800 p-1.5 rounded-lg">
                <span class="text-sm px-2">C·∫•u h√¨nh t =</span>
                <input type="number" id="degreeInput" value="3" min="2" max="10" class="w-12 text-center text-black rounded font-bold">
                <button onclick="updateDegree()" class="px-3 py-1 bg-green-500 hover:bg-green-600 rounded text-sm font-bold">Set</button>
                <button onclick="resetTree()" class="px-3 py-1 bg-red-500 hover:bg-red-600 rounded text-sm"><i class="bi bi-trash"></i></button>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-6">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
            
            <div class="lg:col-span-1 space-y-6">
                <div class="bg-white p-6 rounded-xl shadow-md border-t-4 border-green-500">
                    <h3 class="font-bold text-gray-700 mb-4 flex items-center gap-2"><i class="bi bi-plus-circle text-green-600"></i> Th√™m S√°ch</h3>
                    <form id="addBookForm" class="space-y-3">
                        <input type="text" id="addMaSach" placeholder="M√£ s√°ch (VD: 101)" class="w-full p-2 border rounded" required>
                        <input type="text" id="addTenSach" placeholder="T√™n s√°ch" class="w-full p-2 border rounded" required>
                        <input type="text" id="addTacGia" placeholder="T√°c gi·∫£" class="w-full p-2 border rounded" required>
                        <button type="submit" class="w-full bg-green-600 text-white py-2 rounded font-bold hover:bg-green-700 transition">Th√™m M·ªõi</button>
                        <button type="button" onclick="addRandomBook(this)" class="w-full border-2 border-dashed border-indigo-400 text-indigo-600 py-2 rounded font-bold hover:bg-indigo-50">
                            <i class="bi bi-shuffle"></i> Th√™m Random
                        </button>
                    </form>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-md border-t-4 border-blue-500">
                    <h3 class="font-bold text-gray-700 mb-4">C√¥ng C·ª•</h3>
                    <div class="space-y-4">
                        <form id="searchBookForm" class="flex gap-2">
                            <input type="text" id="searchMaSach" placeholder="T√¨m m√£..." class="w-full p-2 border rounded">
                            <button type="submit" class="bg-blue-600 text-white px-4 rounded hover:bg-blue-700"><i class="bi bi-search"></i></button>
                        </form>
                        <div id="searchResult" class="text-sm"></div>
                        <hr>
                        <form id="deleteBookForm" class="flex gap-2">
                            <input type="text" id="deleteMaSach" placeholder="X√≥a m√£..." class="w-full p-2 border rounded">
                            <button type="submit" class="bg-red-500 text-white px-4 rounded hover:bg-red-600"><i class="bi bi-trash"></i></button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-3 space-y-4">
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-blue-600 text-white p-4 rounded-xl shadow-lg">
                        <p class="opacity-80">T·ªïng s·ªë s√°ch</p>
                        <h2 class="text-3xl font-bold" id="bookCount">0</h2>
                    </div>
                    <div class="bg-purple-600 text-white p-4 rounded-xl shadow-lg">
                        <p class="opacity-80">C·∫•u tr√∫c</p>
                        <h2 class="text-3xl font-bold">B-Tree</h2>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg overflow-hidden min-h-[500px]">
                    <div class="flex border-b">
                        <button onclick="switchTab('list')" id="listTab" class="px-6 py-3 font-bold text-indigo-600 border-b-2 border-indigo-600">Danh S√°ch</button>
                        <button onclick="switchTab('tree')" id="treeTab" class="px-6 py-3 font-bold text-gray-500">S∆° ƒê·ªì C√¢y</button>
                    </div>

                    <div class="p-6">
                        <div id="listContent" class="">
                            <table class="w-full text-left">
                                <thead class="bg-gray-100 text-gray-600 uppercase text-sm">
                                    <tr><th class="p-3">M√£</th><th class="p-3">T√™n S√°ch</th><th class="p-3">T√°c Gi·∫£</th><th class="p-3 text-center">X√≥a</th></tr>
                                </thead>
                                <tbody id="bookTableBody"></tbody>
                            </table>
                        </div>

                        <div id="treeContent" class="hidden">
                            <div id="animationControls" class="hidden flex flex-col md:flex-row justify-center items-center gap-4 mb-6 bg-indigo-50 p-3 rounded-lg border border-indigo-100 shadow-inner">
                                <div class="flex items-center gap-2">
                                    <button onclick="animManager.prev()" class="w-10 h-10 rounded-full bg-white shadow flex items-center justify-center hover:bg-gray-100 disabled:opacity-50 text-indigo-700"><i class="bi bi-chevron-left font-bold"></i></button>
                                    <button onclick="animManager.play()" id="btnPlayPause" class="w-12 h-12 rounded-full bg-indigo-600 shadow-lg flex items-center justify-center hover:bg-indigo-700 text-white text-xl"><i class="bi bi-play-fill"></i></button>
                                    <button onclick="animManager.next()" class="w-10 h-10 rounded-full bg-white shadow flex items-center justify-center hover:bg-gray-100 disabled:opacity-50 text-indigo-700"><i class="bi bi-chevron-right font-bold"></i></button>
                                </div>
                                
                                <div class="flex-1 w-full text-center md:text-left px-4">
                                    <p id="animMessage" class="font-bold text-indigo-800 text-sm mb-1">ƒêang ch·ªù...</p>
                                    <div class="w-full bg-gray-300 rounded-full h-2 overflow-hidden">
                                        <div id="animProgress" class="bg-green-500 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                                    </div>
                                    <p id="animCounter" class="text-xs text-gray-500 mt-1 text-right">0 / 0</p>
                                </div>
                            </div>
                            
                            <div id="treeStructure" class="relative overflow-auto min-h-[600px] flex justify-center p-4"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="toastContainer" class="fixed top-5 right-5 z-50"></div>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>